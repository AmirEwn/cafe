<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مدیریت منو - کافه‌رستوران‌یاب</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Vazirmatn', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            500: '#6d28d9',
                            400: '#8b5cf6',
                        },
                        secondary: '#f59e0b',
                        dark: '#1e293b',
                        light: '#f8fafc',
                        gray: {
                            500: '#64748b',
                            300: '#e2e8f0',
                        },
                        success: '#10b981',
                        danger: '#ef4444',
                    },
                    boxShadow: {
                        card: '0 4px 20px rgba(0, 0, 0, 0.08)',
                        'card-hover': '0 10px 25px rgba(0, 0, 0, 0.1)',
                    },
                }
            }
        }
    </script>

    <style type="text/css">
        body {
            font-family: 'Vazirmatn', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(to left, #f9fafb, #f3f4f6);
        }

        .gradient-bg-reverse {
            background: linear-gradient(to right, #f9fafb, #f3f4f6);
        }

        .gradient-primary {
            background: linear-gradient(135deg, #6d28d9, #8b5cf6);
        }

        .category-card:hover .category-icon {
            background-color: #6d28d9;
            color: white;
            transform: scale(1.1);
        }

        .feature-card:hover .feature-icon {
            background-color: #6d28d9;
            color: white;
            transform: scale(1.1);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 50%;
            transform: translateX(50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, #6d28d9, #8b5cf6);
            border-radius: 2px;
        }

        .footer-col h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 50px;
            height: 3px;
            background-color: #6d28d9;
            border-radius: 2px;
        }

        .place-card:hover .place-image img {
            transform: scale(1.05);
        }

        .blog-card:hover .blog-image img {
            transform: scale(1.05);
        }

        .tab-active {
            background-color: #6d28d9;
            color: white;
        }

        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: left 0.75rem center;
            background-repeat: no-repeat;
            background-size: 16px 12px;
            padding-left: 2.5rem;
        }
    </style>
</head>

<body class="bg-gray-50 text-dark">
    <!-- هدر -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <nav class="flex justify-between items-center py-4">
                <a href="#" class="text-xl font-extrabold text-primary-500">کافه‌رستوران‌یاب</a>

                <div class="hidden md:flex items-center space-x-6 space-x-reverse">
                    <a href="homepage.html" class="font-medium hover:text-primary-500 transition">خانه</a>
                    <a href="#" class="font-medium hover:text-primary-500 transition">مدیریت منو</a>
                    <a href="menu.html" class="font-medium hover:text-primary-500 transition"> مشاهده منو </a>


                </div>

                <div class="hidden md:flex items-center space-x-4 space-x-reverse">
                    <div class="relative group">
                        <button
                            class="flex items-center gap-2 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition">
                            <span class="text-primary-500">سلام، مدیر!</span>
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="پروفایل کاربر"
                                class="w-8 h-8 rounded-full object-cover">
                        </button>
                        <div
                            class="absolute hidden group-hover:block right-0 w-48 bg-white rounded-md shadow-lg py-1 z-50 ">
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">پروفایل من</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">تنظیمات</a>
                            <div class="border-t border-gray-200"></div>
                            <a href="#" class="block px-4 py-2 text-danger hover:bg-gray-100">خروج</a>
                        </div>
                    </div>
                </div>

                <button class="md:hidden text-2xl">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- بخش مدیریت منو -->
    <section class="py-10 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-extrabold text-center mb-4 relative pb-4 section-title">مدیریت منو</h2>
            <p class="text-gray-500 text-center mb-8 max-w-2xl mx-auto">اینجا می‌توانید منوهای کافه‌رستوران خود را
                مدیریت کنید</p>

            <!-- تب‌های مدیریت -->
            <div class="flex flex-wrap justify-center gap-4 mb-8">
                <button id="categories-tab"
                    class="tab-btn px-6 py-3 bg-primary-500 text-white rounded-full font-medium tab-active">
                    مدیریت دسته‌بندی‌ها
                </button>
                <button id="menu-items-tab" class="tab-btn px-6 py-3 bg-gray-200 text-dark rounded-full font-medium">
                    مدیریت آیتم‌های منو
                </button>
                <button id="menus-tab" class="tab-btn px-6 py-3 bg-gray-200 text-dark rounded-full font-medium">
                    مدیریت منوها
                </button>
            </div>

            <!-- بخش مدیریت دسته‌بندی‌ها -->
            <div id="categories-section" class="tab-content">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold">دسته‌بندی‌های منو</h3>
                    <button id="add-category-btn"
                        class="px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">
                        <i class="fas fa-plus ml-2"></i>
                        افزودن دسته‌بندی جدید
                    </button>
                </div>

                <div id="categorys" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- دسته‌بندی ۱ -->
                    <div class="bg-white rounded-xl shadow-card p-6">
                        <div class="flex justify-end mb-4">
                            <div class="flex gap-2 ">
                                <button class="edit-category-btn text-primary-500 hover:text-primary-400 transition">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-category-btn text-danger hover:text-red-600 transition">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <h4 class="text-lg font-bold mb-2">نوشیدنی‌های گرم</h4>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-500 text-sm"> id </span>

                        </div>
                    </div>

                    <!-- دسته‌بندی ۲ -->
                    <div class="bg-white rounded-xl shadow-card p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div
                                class="w-12 h-12 bg-primary-500/10 rounded-lg flex items-center justify-center text-primary-500 text-xl">
                                <i class="fas fa-cookie"></i>
                            </div>
                            <div class="flex gap-2">
                                <button class="edit-category-btn text-primary-500 hover:text-primary-400 transition">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-category-btn text-danger hover:text-red-600 transition">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <h4 class="text-lg font-bold mb-2">دسرها</h4>
                        <p class="text-gray-500 text-sm mb-4">انواع کیک، دسر و شیرینی‌جات</p>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-500 text-sm">12 آیتم</span>
                            <span class="px-2 py-1 bg-green-100 text-success text-xs rounded-full">فعال</span>
                        </div>
                    </div>

                    <!-- دسته‌بندی ۳ -->
                    <div class="bg-white rounded-xl shadow-card p-6">
                        <div class="flex justify-between items-start mb-4">
                            <div
                                class="w-12 h-12 bg-primary-500/10 rounded-lg flex items-center justify-center text-primary-500 text-xl">
                                <i class="fas fa-hamburger"></i>
                            </div>
                            <div class="flex gap-2">
                                <button class="edit-category-btn text-primary-500 hover:text-primary-400 transition">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-category-btn text-danger hover:text-red-600 transition">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <h4 class="text-lg font-bold mb-2">فست فود</h4>
                        <p class="text-gray-500 text-sm mb-4">برگر، ساندویچ و غذاهای سریع</p>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-500 text-sm">15 آیتم</span>
                            <span class="px-2 py-1 bg-red-100 text-danger text-xs rounded-full">غیرفعال</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- بخش مدیریت آیتم‌های منو -->
            <div id="menu-items-section" class="tab-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold">آیتم‌های منو</h3>
                    <button id="add-item-btn"
                        class="px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">
                        <i class="fas fa-plus ml-2"></i>
                        افزودن آیتم جدید
                    </button>
                </div>

                <div class="bg-white rounded-xl shadow-card overflow-hidden mb-6">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-right font-semibold">نام آیتم</th>
                                    <th class="px-6 py-3 text-right font-semibold">دسته‌بندی</th>
                                    <th class="px-6 py-3 text-right font-semibold">قیمت</th>
                                    <th class="px-6 py-3 text-right font-semibold">وضعیت</th>
                                    <th class="px-6 py-3 text-right font-semibold">عملیات</th>
                                </tr>
                            </thead>
                            <tbody id="items" class="divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <img src="https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
                                                alt="اسپرسو" class="w-10 h-10 rounded-lg object-cover mr-3">
                                            <div>
                                                <div class="font-medium">اسپرسو</div>
                                                <div class="text-gray-500 text-sm">قهوه غلیظ و پررنگ</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">نوشیدنی‌های گرم</td>
                                    <td class="px-6 py-4 font-medium">35,000 تومان</td>
                                    <td class="px-6 py-4">
                                        <span
                                            class="px-2 py-1 bg-green-100 text-success text-xs rounded-full">موجود</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary-500 hover:text-primary-400 transition">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="text-danger hover:text-red-600 transition">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <img src="https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1374&q=80"
                                                alt="چیزکیک" class="w-10 h-10 rounded-lg object-cover mr-3">
                                            <div>
                                                <div class="font-medium">چیزکیک توت فرنگی</div>
                                                <div class="text-gray-500 text-sm">دسر خامه‌ای با توت فرنگی تازه</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">دسرها</td>
                                    <td class="px-6 py-4 font-medium">65,000 تومان</td>
                                    <td class="px-6 py-4">
                                        <span
                                            class="px-2 py-1 bg-green-100 text-success text-xs rounded-full">موجود</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary-500 hover:text-primary-400 transition">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="text-danger hover:text-red-600 transition">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1398&q=80"
                                                alt="برگر" class="w-10 h-10 rounded-lg object-cover mr-3">
                                            <div>
                                                <div class="font-medium">برگر ویژه</div>
                                                <div class="text-gray-500 text-sm">برگر با پنیر چدار و سس مخصوص</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">فست فود</td>
                                    <td class="px-6 py-4 font-medium">120,000 تومان</td>
                                    <td class="px-6 py-4">
                                        <span
                                            class="px-2 py-1 bg-red-100 text-danger text-xs rounded-full">ناموجود</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button class="text-primary-500 hover:text-primary-400 transition">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="text-danger hover:text-red-600 transition">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- بخش مدیریت منوها -->
            <div id="menus-section" class="tab-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold">منوها</h3>
                    <div class="flex gap-2">
                        <button id="add-menu-btn"
                            class="px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">
                            <i class="fas fa-plus ml-2"></i>
                            ایجاد منوی جدید
                        </button>
                        <!-- <button id="delete-all-menus-btn"
                            class="px-4 py-2 bg-danger text-white rounded-lg font-medium hover:bg-red-600 transition">
                            <i class="fas fa-trash ml-2"></i>
                            حذف همه منوها
                        </button> -->
                    </div>
                </div>

                <div id="menus" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- منوی ۱ -->
                    <div class="bg-white rounded-xl shadow-card p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h4 class="text-xl font-bold">منوی اصلی</h4>
                            <div class="flex gap-2">
                                <button class="text-primary-500 hover:text-primary-400 transition">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-danger hover:text-red-600 transition">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <p class="text-gray-500 mb-4">منوی کامل کافه‌رستوران شامل همه دسته‌بندی‌ها</p>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-gray-500 text-sm">تعداد آیتم‌ها: 35</span>
                            <span class="px-2 py-1 bg-green-100 text-success text-xs rounded-full">فعال</span>
                        </div>
                        <div class="flex gap-2">
                            <button
                                class="flex-1 px-3 py-2 bg-primary-500 text-white rounded-lg text-sm font-medium hover:bg-primary-400 transition">
                                مشاهده منو
                            </button>
                            <button
                                class="flex-1 px-3 py-2 border border-primary-500 text-primary-500 rounded-lg text-sm font-medium hover:bg-primary-500/10 transition">
                                کپی منو
                            </button>
                        </div>
                    </div>

                    <!-- منوی ۲ -->
                    <div class="bg-white rounded-xl shadow-card p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h4 class="text-xl font-bold">منوی صبحانه</h4>
                            <div class="flex gap-2">
                                <button class="text-primary-500 hover:text-primary-400 transition">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-danger hover:text-red-600 transition">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <p class="text-gray-500 mb-4">منوی ویژه صبحانه شامل غذاهای سنتی و بین‌المللی</p>
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-gray-500 text-sm">تعداد آیتم‌ها: 18</span>
                            <span class="px-2 py-1 bg-green-100 text-success text-xs rounded-full">فعال</span>
                        </div>
                        <div class="flex gap-2">
                            <button
                                class="flex-1 px-3 py-2 bg-primary-500 text-white rounded-lg text-sm font-medium hover:bg-primary-400 transition">
                                مشاهده منو
                            </button>
                            <button
                                class="flex-1 px-3 py-2 border border-primary-500 text-primary-500 rounded-lg text-sm font-medium hover:bg-primary-500/10 transition">
                                کپی منو
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- مودال افزودن دسته‌بندی -->
    <div id="category-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="modal-title">افزودن دسته‌بندی جدید</h3>
                <button id="close-modal" class="text-gray-500 hover:text-dark transition">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form id="category-form">
                <div class="mb-4">
                    <label for="category-name" class="block text-gray-700 mb-2">نام دسته‌بندی</label>
                    <input type="text" id="category-name"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                </div>
                <div class="mb-4">
                    <label for="category-menu" class="block text-gray-700 mb-2">منو مربوطه</label>
                    <select id="category-menu"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                        <option value="">انتخاب منو</option>
                        <!-- منوها اینجا لود می‌شوند -->
                    </select>
                </div>
                <div class="flex gap-3">
                    <button type="button" id="cancel-modal"
                        class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition">انصراف</button>
                    <button type="submit"
                        class="flex-1 px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">ذخیره</button>
                </div>
            </form>
        </div>
    </div>


    <!-- مودال ویرایش دسته‌بندی -->
    <div id="category-edit-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="modal-edit-title">ویرایش دسته‌بندی جدید</h3>
                <button id="close-edit-modal" class="text-gray-500 hover:text-dark transition">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form id="category-edit-form">
                <div class="mb-4">
                    <label for="category-edit-name" class="block text-gray-700 mb-2">نام دسته‌بندی</label>
                    <input type="text" id="category-edit-name"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                </div>
                <div class="flex gap-3">
                    <button type="button" id="cancel-edit-modal"
                        class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition">انصراف</button>
                    <button type="submit"
                        class="flex-1 px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">ذخیره</button>
                </div>
            </form>
        </div>
    </div>

    <!-- مودال افزودن آیتم جدید -->
    <div id="item-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-3xl mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="item-modal-title">افزودن آیتم جدید</h3>
                <button id="close-item-modal" class="text-gray-500 hover:text-dark transition">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="item-form">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <div class="mb-4">
                            <label for="item-name" class="block text-gray-700 mb-2">نام آیتم</label>
                            <input type="text" id="item-name"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                        </div>
                        <div class="mb-4">
                            <label for="item-category" class="block text-gray-700 mb-2">دسته‌بندی</label>
                            <select id="item-category"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                                <option value="">انتخاب دسته‌بندی</option>
                                <!-- دسته‌بندی‌ها اینجا لود می‌شوند -->
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="item-price" class="block text-gray-700 mb-2">قیمت</label>
                            <input type="number" id="item-price"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                        </div>
                        <div class="mb-4">
                            <label for="item-desc" class="block text-gray-700 mb-2">توضیحات</label>
                            <textarea id="item-desc" rows="2"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition"></textarea>
                        </div>
                    </div>
                    <div>

                        <div class="mb-4">
                            <label for="item-image" class="block text-gray-700 mb-2">تصویر منو</label>
                            <input type="file" id="item-image" accept="image/*"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                        </div>


                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">سایز</label>
                            <div class="flex gap-4">
                                <label class="flex items-center">
                                    <input type="checkbox" name="item-size" value="کوچک"
                                        class="rounded border-gray-300 text-primary-500 focus:ring-primary-500">
                                    <span class="mr-2">کوچک</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="item-size" value="متوسط"
                                        class="rounded border-gray-300 text-primary-500 focus:ring-primary-500">
                                    <span class="mr-2">متوسط</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="item-size" value="بزرگ"
                                        class="rounded border-gray-300 text-primary-500 focus:ring-primary-500">
                                    <span class="mr-2">بزرگ</span>
                                </label>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-gray-700 mb-2">اضافه‌ها</label>
                            <div class="flex gap-4">
                                <label class="flex items-center">
                                    <input id="extra-cheese" type="checkbox" name="item-extra" value="پنیر اضافی"
                                        class="rounded border-gray-300 text-primary-500 focus:ring-primary-500">
                                    <span class="mr-2">پنیر اضافی</span>
                                </label>
                                <label class="flex items-center">
                                    <input id="extra-sauce" type="checkbox" name="item-extra" value="سس اضافی"
                                        class="rounded border-gray-300 text-primary-500 focus:ring-primary-500">
                                    <span class="mr-2">سس اضافی</span>
                                </label>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="flex items-center">
                                <input id="status" type="checkbox" id="item-status"
                                    class="rounded border-gray-300 text-primary-500 focus:ring-primary-500">
                                <span class="mr-2">آیتم فعال باشد</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="flex gap-3 mt-4">
                    <button type="button" id="cancel-item-modal"
                        class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition">انصراف</button>
                    <button type="submit"
                        class="flex-1 px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">ذخیره</button>
                </div>
            </form>
        </div>
    </div>


    <!-- مودال ویرایش آیتم -->
    <div id="item-edit-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="item-edit-modal-title">ویرایش آیتم</h3>
                <button id="close-edit-item-modal" class="text-gray-500 hover:text-dark transition">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form id="item-edit-form" class="space-y-4">
                <div>
                    <label for="item-edit-name" class="block text-gray-700 mb-2">نام آیتم</label>
                    <input type="text" id="item-edit-name"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                </div>

                <div>
                    <label for="item-edit-price" class="block text-gray-700 mb-2">قیمت</label>
                    <input type="number" id="item-edit-price"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                </div>

                <div>
                    <label class="flex items-center">
                        <input id="item-edit-status" type="checkbox"
                            class="rounded border-gray-300 text-primary-500 focus:ring-primary-500">
                        <span class="mr-2">آیتم فعال باشد</span>
                    </label>
                </div>

                <div class="flex gap-3">
                    <button type="button" id="cancel-edit-item-modal"
                        class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition">انصراف</button>
                    <button type="submit"
                        class="flex-1 px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">ذخیره</button>
                </div>
            </form>
        </div>
    </div>



    <!-- مودال ایجاد منوی جدید -->
    <div id="menu-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="menu-modal-title">ایجاد منوی جدید</h3>
                <button id="close-menu-modal" class="text-gray-500 hover:text-dark transition">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="menu-form">
                <div class="mb-4">
                    <label for="menu-name" class="block text-gray-700 mb-2">نام منو</label>
                    <input type="text" id="menu-name"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                </div>
                <div class="mb-4">
                    <label for="menu-image" class="block text-gray-700 mb-2">تصویر منو</label>
                    <input type="file" id="menu-image" accept="image/*"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                </div>
                <div class="flex gap-3">
                    <button type="button" id="cancel-menu-modal"
                        class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition">انصراف</button>
                    <button type="submit" id="submit-menu-modal"
                        class="flex-1 px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">ذخیره</button>
                </div>
            </form>
        </div>
    </div>

    <!-- مودال ویرایش منوی جدید -->
    <div id="menu-edit-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="menu-modal-edit-title">ایجاد منوی جدید</h3>
                <button id="close-menu-edit-modal" class="text-gray-500 hover:text-dark transition">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="menu-edit-form">
                <div class="mb-4">
                    <label for="menu-edit-name" class="block text-gray-700 mb-2">نام منو</label>
                    <input type="text" id="menu-edit-name"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                </div>
                <div class="mb-4">
                    <label for="menu-edit-image" class="block text-gray-700 mb-2">تصویر منو</label>
                    <input type="file" id="menu-edit-image" accept="image/*"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition">
                </div>
                <div class="flex gap-3">
                    <button type="button" id="cancel-menu-edit-modal"
                        class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition">انصراف</button>
                    <button type="submit" id="submit-menu-edit-modal"
                        class="flex-1 px-4 py-2 bg-primary-500 text-white rounded-lg font-medium hover:bg-primary-400 transition">ذخیره</button>
                </div>
            </form>
        </div>
    </div>


    <!-- فوتر -->
    <footer class="bg-dark text-white pt-12 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
                <div class="footer-col">
                    <h3 class="text-xl font-bold mb-6 relative pb-3">کافه‌رستوران‌یاب</h3>
                    <p class="text-gray-300 mb-6">کافه‌رستوران‌یاب به شما کمک می‌کند بهترین کافه‌ها، رستوران‌ها و
                        کافه‌رستوران‌های
                        اطراف خود را پیدا کرده و تجربه‌ای لذت‌بخش داشته باشید.</p>

                    <div class="flex gap-4">
                        <a href="#"
                            class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary-500 hover:-translate-y-1 transition">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary-500 hover:-translate-y-1 transition">
                            <i class="fab fa-telegram"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary-500 hover:-translate-y-1 transition">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-primary-500 hover:-translate-y-1 transition">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                </div>

                <div class="footer-col">
                    <h3 class="text-xl font-bold mb-6 relative pb-3">لینک‌های سریع</h3>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">خانه</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">درباره ما</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">کافه‌ها و
                                رستوران‌ها</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">مقالات</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">تماس با ما</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h3 class="text-xl font-bold mb-6 relative pb-3">دسته‌بندی‌ها</h3>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">کافه‌ها</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">رستوران‌ها</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">کافه‌رستوران‌ها</a>
                        </li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">فست فود</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pr-2 transition">بین‌المللی</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h3 class="text-xl font-bold mb-6 relative pb-3">تماس با ما</h3>
                    <ul class="space-y-4">
                        <li class="flex items-start gap-3 text-gray-300">
                            <i class="fas fa-map-marker-alt text-primary-500 mt-1"></i>
                            تهران، خیابان آزادی، بلوار کشاورز
                        </li>
                        <li class="flex items-start gap-3 text-gray-300">
                            <i class="fas fa-phone text-primary-500 mt-1"></i>
                            021-12345678
                        </li>
                        <li class="flex items-start gap-3 text-gray-300">
                            <i class="fas fa-envelope text-primary-500 mt-1"></i>
                            info@cafe-restaurant-finder.com
                        </li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-white/10 py-6 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-gray-300 text-sm">© 1402 تمام حقوق برای کافه‌رستوران‌یاب محفوظ است.</p>

                <div class="flex gap-6">
                    <a href="#" class="text-gray-300 hover:text-white text-sm transition">قوانین و مقررات</a>
                    <a href="#" class="text-gray-300 hover:text-white text-sm transition">حریم خصوصی</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // اسکریپت برای مدیریت تب‌ها
        document.addEventListener('DOMContentLoaded', function () {
            const token = sessionStorage.getItem('accessToken');


            // مدیریت تب‌ها
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // حذف کلاس active از همه دکمه‌ها
                    tabButtons.forEach(btn => {
                        btn.classList.remove('bg-primary-500', 'text-white', 'tab-active');
                        btn.classList.add('bg-gray-200', 'text-dark');
                    });

                    // اضافه کردن کلاس active به دکمه کلیک شده
                    button.classList.remove('bg-gray-200', 'text-dark');
                    button.classList.add('bg-primary-500', 'text-white', 'tab-active');

                    // مخفی کردن همه محتواها
                    tabContents.forEach(content => {
                        content.classList.add('hidden');
                    });

                    // نمایش محتوای مربوطه
                    const targetId = button.id.replace('-tab', '-section');
                    document.getElementById(targetId).classList.remove('hidden');
                });
            });

            async function loadMenusForDropdown() {
                try {
                    const response = await fetch("http://135.125.238.202:7050/menu/", {
                        method: "GET",
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    const menusList = await response.json();

                    const categoryMenuSelect = document.getElementById('category-menu');
                    categoryMenuSelect.innerHTML = '<option value="">انتخاب منو</option>';

                    menusList.forEach(menu => {
                        const option = document.createElement('option');
                        option.value = menu.id;
                        option.textContent = menu.name;
                        categoryMenuSelect.appendChild(option);
                    });
                } catch (error) {
                    console.error('خطا در دریافت منوها برای دراپ‌داون:', error);
                }
            }

            async function loadCategoriesForDropdown() {
                try {
                    const response = await fetch("http://135.125.238.202:7050/menu/category/", {
                        method: "GET",
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    const categoryList = await response.json();

                    const itemCategorySelect = document.getElementById('item-category');
                    itemCategorySelect.innerHTML = '<option value="">انتخاب دسته‌بندی</option>';

                    categoryList.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category.id;
                        option.textContent = category.name;
                        itemCategorySelect.appendChild(option);
                    });
                } catch (error) {
                    console.error('خطا در دریافت دسته‌بندی‌ها برای دراپ‌داون:', error);
                }
            }






            //نمایش منو ها
            const menus = document.getElementById("menus");
            let currentMenuId = null;
            async function loadMenus() {
                try {
                    const response = await fetch("http://135.125.238.202:7050/menu/", {
                        method: "GET",
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    const menusList = await response.json();

                    menus.innerHTML = "";
                    console.log(menusList);
                    menusList.forEach(menu => {
                        const card = document.createElement("div");
                        card.className = "bg-white rounded-xl shadow-card p-6";

                        // مسیر کامل عکس
                        const baseUrl = "http://135.125.238.202:7050";
                        const imageUrl = menu.image_path ? `${baseUrl}${menu.image_path}` : null;

                        card.innerHTML = `
        <div class="flex justify-between items-start mb-4">

            
            <div class="w-16 h-16 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center mr-2">
                ${imageUrl
                                ? `<img src="${imageUrl}" alt="${menu.name}" class="w-full h-full object-cover">`
                                : `<i class="fas fa-utensils text-3xl text-gray-300"></i>`}
            </div>

            <div class="flex flex-col justify-center items-start flex-1 mr-2 pr-5">
                <h4 class="text-xl font-bold mb-1">${menu.name}</h4>
                <span class="text-gray-500 text-sm">menu id = ${menu.id}</span>
            </div>
             
            <div class="flex gap-2">
                <button class="edit-menu-btn text-primary-500 hover:text-primary-400 transition" data-id="${menu.id}">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="delete-menu-btn text-danger hover:text-red-600 transition" data-id="${menu.id}">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            
        </div>
        
    `;
                        menus.appendChild(card);
                    });

                    // فقط دکمه‌های حذف منو را فعال کن
                    document.querySelectorAll('.delete-menu-btn').forEach(btn => {
                        btn.addEventListener('click', async function () {
                            const menuId = btn.getAttribute('data-id');

                            if (confirm('آیا از حذف این منو اطمینان دارید؟')) {
                                try {
                                    const response = await fetch(`http://135.125.238.202:7050/menu/${menuId}/`, {
                                        method: "DELETE",
                                        headers: {
                                            "Authorization": `Bearer ${token}`
                                        }
                                    });
                                    if (response.ok) {
                                        alert("منو با موفقیت حذف شد!");
                                        loadMenus();
                                    } else {
                                        alert("خطا در حذف منو");
                                    }
                                } catch (error) {
                                    alert("ارتباط با سرور برقرار نشد");
                                }
                            }
                        });
                    });

                    document.querySelectorAll('.edit-menu-btn').forEach(btn => {
                        const menuModal = document.getElementById('menu-edit-modal');
                        const closeMenuModalBtn = document.getElementById('close-menu-edit-modal');
                        const cancelMenuModalBtn = document.getElementById('cancel-menu-edit-modal');

                        const modalTitle = document.getElementById('menu-modal-edit-title');

                        btn.addEventListener('click', () => {
                            currentMenuId = btn.getAttribute('data-id');
                            modalTitle.textContent = `ویرایش منو`;
                            menuModal.classList.remove('hidden');
                        });

                        closeMenuModalBtn.addEventListener('click', () => {
                            menuModal.classList.add('hidden');
                        });

                        cancelMenuModalBtn.addEventListener('click', () => {
                            menuModal.classList.add('hidden');
                        });


                    });


                } catch (error) {
                    menus.innerHTML = '<div class="text-danger text-center">خطا در دریافت منوها</div>';
                }
            }
            const menuEditForm = document.getElementById('menu-edit-form');
            menuEditForm.addEventListener('submit', async (e) => {
                const menuModal = document.getElementById('menu-edit-modal');
                e.preventDefault();

                const name = document.getElementById('menu-edit-name');
                const image = document.getElementById('menu-edit-image');

                const formData = new FormData();
                formData.append("name", name.value);
                if (image.files[0]) {
                    formData.append("image", image.files[0]);
                }

                try {

                    const response = await fetch(`http://135.125.238.202:7050/menu/${currentMenuId}/`, {
                        method: "PUT",
                        headers: {
                            'Authorization': `Bearer ${token}`
                        },
                        body: formData
                    });

                    const data = await response.json();
                    if (response.status === 200) {
                        alert('منو با موفقیت ذخیره شد ');
                        menuModal.classList.add('hidden');
                        loadMenus();
                    } else {
                        alert(' خطا در ارتباط با سرور');
                    }

                } catch (error) {
                    console.error(" ارور شما : ", error);
                }
            });

            loadMenus();



            // مدیریت مودال دسته‌بندی
            const categoryModal = document.getElementById('category-modal');
            const addCategoryBtn = document.getElementById('add-category-btn');
            const closeModalBtn = document.getElementById('close-modal');
            const cancelModalBtn = document.getElementById('cancel-modal');
            const categoryForm = document.getElementById('category-form');

            addCategoryBtn.addEventListener('click', () => {
                document.getElementById('modal-title').textContent = 'افزودن دسته‌بندی جدید';
                loadMenusForDropdown();
                categoryModal.classList.remove('hidden');
            });

            closeModalBtn.addEventListener('click', () => {
                categoryModal.classList.add('hidden');
            });

            cancelModalBtn.addEventListener('click', () => {
                categoryModal.classList.add('hidden');
            });

            categoryForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                const menu = document.getElementById('category-menu').value;
                const name = document.getElementById('category-name').value;
                if (!menu) {
                    alert('لطفاً یک منو انتخاب کنید');
                    return;
                }

                try {
                    const response = await fetch("http://135.125.238.202:7050/menu/category/", {
                        method: "POST",
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({
                            menu, name
                        })
                    })

                    const data = await response.json();
                    if (response.status === 201) {
                        alert('دسته بندی با موفقیت ذخیره شد ');
                        menuModal.classList.add('hidden');
                        loadCategory();
                    }
                    else {
                        alert(' خطا در ارتباط ');
                    }


                } catch (error) {
                    console.error(" ارور شما : ", error);
                }


                categoryModal.classList.add('hidden');
            });




            // نمایش دسته بندی ها
            const categorys = document.getElementById("categorys");
            let currentCategoryId = null;

            async function loadCategory() {

                try {

                    const response = await fetch("http://135.125.238.202:7050/menu/category/", {
                        method: "GET",
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    })
                    const categoyList = await response.json();

                    categorys.innerHTML = "";
                    console.log(categoyList);
                    categoyList.forEach(category => {
                        const card = document.createElement("div");
                        card.className = "bg-white rounded-xl shadow-card p-6";

                        card.innerHTML = `
                        <div class="flex justify-end mb-4">
                            <div class="flex gap-2 ">
                                <button class="edit-category-btn text-primary-500 hover:text-primary-400 transition" category-id="${category.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete-category-btn text-danger hover:text-red-600 transition" category-id="${category.id}">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <h4 class="text-lg font-bold mb-2">${category.name}</h4>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-500 text-sm">category id = ${category.id}</span>
                            <span class="text-gray-500 text-sm">menu id = ${category.menu}</span>
                            
                        </div>
                        `
                        categorys.appendChild(card);


                    });
                    document.querySelectorAll('.delete-category-btn').forEach(btn => {
                        btn.addEventListener('click', async function () {
                            const categoryId = btn.getAttribute('category-id');

                            if (confirm('آیا از حذف این دسته بندی اطمینان دارید؟')) {
                                try {
                                    const response = await fetch(`http://135.125.238.202:7050/menu/category/${categoryId}/`, {
                                        method: "DELETE",
                                        headers: {
                                            "Authorization": `Bearer ${token}`
                                        }
                                    });
                                    if (response.ok) {
                                        alert("دسته بندی با موفقیت حذف شد!");
                                        loadCategory();
                                    } else {
                                        alert("خطا در حذف دسته بندی");
                                    }
                                } catch (error) {
                                    alert("ارتباط با سرور برقرار نشد");
                                }
                            }
                        });
                    });

                    document.querySelectorAll('.edit-category-btn').forEach(btn => {

                        const categoryModal = document.getElementById('category-edit-modal');
                        const closeModalBtn = document.getElementById('close-edit-modal');
                        const cancelModalBtn = document.getElementById('cancel-edit-modal');


                        btn.addEventListener('click', () => {
                            currentCategoryId = btn.getAttribute('category-id');
                            document.getElementById('modal-edit-title').textContent = 'ویرایش دسته‌بندی';
                            categoryModal.classList.remove('hidden');
                        });

                        closeModalBtn.addEventListener('click', () => {
                            categoryModal.classList.add('hidden');
                        });

                        cancelModalBtn.addEventListener('click', () => {
                            categoryModal.classList.add('hidden');
                        });



                    });



                } catch (error) {
                    categorys.innerHTML = '<div class="text-danger text-center">خطا در دریافت منوها</div>';
                }


            }
            const categoryEditForm = document.getElementById('category-edit-form');
            categoryEditForm.addEventListener('submit', async (e) => {
                const categoryModal = document.getElementById('category-edit-modal');
                e.preventDefault();

                const name = document.getElementById('category-edit-name').value;
                // const categoryId = .getAttribute('category-id');
                try {
                    const response = await fetch(`http://135.125.238.202:7050/menu/category/${currentCategoryId}/`, {
                        method: "PUT",
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({
                            name
                        })
                    })

                    const data = await response.json();
                    if (response.status === 200) {
                        alert('دسته بندی با موفقیت ذخیره شد ');
                        categoryModal.classList.add('hidden');
                        loadCategory();

                    }
                    else {
                        alert(' خطا در ارتباط ');
                    }


                } catch (error) {
                    console.error(" ارور شما : ", error);
                }
            });

            loadCategory();

            // مودال آیتم جدید
            const itemModal = document.getElementById('item-modal');
            const addItemBtn = document.getElementById('add-item-btn');
            const closeItemModalBtn = document.getElementById('close-item-modal');
            const cancelItemModalBtn = document.getElementById('cancel-item-modal');
            const itemForm = document.getElementById('item-form');

            addItemBtn.addEventListener('click', () => {
                document.getElementById('item-modal-title').textContent = 'افزودن آیتم جدید';
                loadCategoriesForDropdown();
                itemModal.classList.remove('hidden');
            });

            closeItemModalBtn.addEventListener('click', () => {
                itemModal.classList.add('hidden');
            });

            cancelItemModalBtn.addEventListener('click', () => {
                itemModal.classList.add('hidden');
            });

            itemForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                const itemName = document.getElementById("item-name").value;
                const itemCategory = document.getElementById("item-category").value;
                const itemPrice = parseInt(document.getElementById("item-price").value) || 0;
                const itemDesc = document.getElementById("item-desc").value;
                const itemImage = document.getElementById("item-image");
                const status = document.getElementById("status").checked;
                if (!itemCategory) {
                    alert('لطفاً یک دسته‌بندی انتخاب کنید');
                    return;
                }

                // گرفتن سایزها
                const sizeCheckboxes = document.querySelectorAll('input[name="item-size"]:checked');
                const sizes = Array.from(sizeCheckboxes).map(cb => cb.value);

                // گرفتن extras
                const extraCheckboxes = document.querySelectorAll('input[name="item-extra"]:checked');
                const extras = Array.from(extraCheckboxes).map(cb => cb.value);




                const formData = new FormData();
                formData.append("name", itemName);
                formData.append("image", itemImage.files[0]);
                formData.append("category", itemCategory);
                formData.append("price", itemPrice);
                formData.append("description", itemDesc);
                formData.append("is_available", status);
                formData.append("options", JSON.stringify({
                    size: sizes,
                    extra: extras
                }));



                // console.log(formData);

                // const imagePath = "https://example.com/item-image.jpg";

                // const payload = {
                //     category: itemCategory,
                //     name: itemName,
                //     description: itemDesc,
                //     price: itemPrice,
                //     is_available: status,
                //     image_path: imagePath,
                //     options: {
                //         size: sizes,
                //         extra: extras
                //     }
                // };

                // console.log(payload);

                try {
                    const response = await fetch("http://135.125.238.202:7050/menu/item/", {
                        method: "POST",
                        headers: {
                            // "Content-Type": "application/json",
                            'Authorization': `Bearer ${token}`
                        },
                        body: formData

                    })

                    if (!response.ok) {
                        throw new Error(`خطا در ارسال: ${response.status}`);
                    }

                    const data = await response.json();

                    console.log(" سرور جواب داد:", data);

                    alert("آیتم با موفقیت ذخیره شد!");

                    itemModal.classList.add("hidden");
                    loadItem();

                } catch (error) {
                    console.error(" خطا:", error);
                    alert("مشکلی در ذخیره آیتم پیش آمد.");
                }

                // alert('آیتم با موفقیت ذخیره شد!');
                itemModal.classList.add('hidden');
            });

            //نمایش آیتم ها
            const items = document.getElementById("items");
            let currentItemId = null;
            async function loadItem() {

                try {

                    const response = await fetch("http://135.125.238.202:7050/menu/item/", {
                        method: "GET",
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    })

                    const itemList = await response.json();
                    console.log(itemList);
                    items.innerHTML = "";

                    itemList.forEach(item => {
                        const card = document.createElement("tr");
                        // مسیر کامل عکس
                        const baseUrl = "http://135.125.238.202:7050";
                        const imageUrl = item.image_path ? `${baseUrl}${item.image_path}` : null;
                        const formattedPrice = parseInt(item.price).toLocaleString('fa-IR') + ' تومان';
                        card.innerHTML = `
                                
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <img src="${imageUrl}"
                                                alt="اسپرسو" class="w-10 h-10 rounded-lg object-cover mr-3">
                                            <div>
                                                <div class="pr-5 font-medium">${item.name}</div>
                                                <div class="pr-5 text-gray-500 text-sm">${item.description}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">item id =  ${item.id}</td>
                                    <td class="px-6 py-4 font-medium">${formattedPrice}</td>
                                    <td class="px-6 py-4">
                                        <span
                                            class="px-2 py-1 ${item.is_available ? 'bg-green-100 text-success' : 'bg-red-100 text-danger'} text-xs rounded-full">
                                                ${item.is_available ? 'موجود' : 'ناموجود'}
                                            </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="flex gap-2">
                                            <button class="edit-item-btn text-primary-500 hover:text-primary-400 transition" item-id="${item.id}">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="delete-item-btn text-danger hover:text-red-600 transition" item-id="${item.id}">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                `

                        items.appendChild(card);
                    });
                    document.querySelectorAll('.delete-item-btn').forEach(btn => {
                        btn.addEventListener('click', async function () {
                            const itemId = btn.getAttribute('item-id');
                            console.log(itemId);
                            if (confirm('آیا از حذف این آیتم اطمینان دارید؟')) {
                                try {
                                    const response = await fetch(`http://135.125.238.202:7050/menu/item/${itemId}/`, {
                                        method: "DELETE",
                                        headers: {
                                            "Authorization": `Bearer ${token}`
                                        }
                                    });
                                    if (response.ok) {
                                        alert("آیتم با موفقیت حذف شد");
                                        loadItem();
                                    } else {
                                        alert("خطا در حذف آتیم");
                                    }
                                } catch (error) {
                                    alert("ارتباط با سرور برقرار نشد");
                                }
                            }
                        });
                    });

                    document.querySelectorAll('.edit-item-btn').forEach(btn => {
                        const itemModal = document.getElementById('item-edit-modal');
                        const closeItemModalBtn = document.getElementById('close-edit-item-modal');
                        const cancelItemModalBtn = document.getElementById('cancel-edit-item-modal');


                        btn.addEventListener('click', () => {
                            currentItemId = btn.getAttribute('item-id');
                            document.getElementById('item-edit-modal-title').textContent = 'ویرایش آیتم';
                            itemModal.classList.remove('hidden');
                        });

                        closeItemModalBtn.addEventListener('click', () => {
                            itemModal.classList.add('hidden');
                        });

                        cancelItemModalBtn.addEventListener('click', () => {
                            itemModal.classList.add('hidden');
                        });
                    });

                } catch (error) {

                }

            }
            const itemEditForm = document.getElementById('item-edit-form');
            itemEditForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const itemModal = document.getElementById('item-edit-modal');

                const itemName = document.getElementById("item-edit-name").value;               
                const itemPrice = parseInt(document.getElementById("item-edit-price").value) || 0;           
                const status = document.getElementById("item-edit-status").checked;
                
                const formData = new FormData();
                formData.append("name", itemName);                
                formData.append("price", itemPrice);
                formData.append("is_available", status);

                try {
                    const response = await fetch(`http://135.125.238.202:7050/menu/item/${currentItemId}/`, {
                        method: "PUT",
                        headers: {
                            'Authorization': `Bearer ${token}`
                        },
                        body: formData

                    })

                    if (!response.ok) {
                        throw new Error(`خطا در ارسال: ${response.status}`);
                    }

                    const data = await response.json();

                    console.log(" سرور جواب داد:", data);

                    alert("آیتم با موفقیت ذخیره شد!");

                    itemModal.classList.add("hidden");
                    loadItem();

                } catch (error) {
                    console.error(" خطا:", error);
                    alert("مشکلی در ذخیره آیتم پیش آمد.");
                }

               
                itemModal.classList.add('hidden');
            });
            loadItem();

            // مودال منوی جدید
            const menuModal = document.getElementById('menu-modal');
            const addMenuBtn = document.getElementById('add-menu-btn');
            const closeMenuModalBtn = document.getElementById('close-menu-modal');
            const cancelMenuModalBtn = document.getElementById('cancel-menu-modal');
            const menuForm = document.getElementById('menu-form');

            addMenuBtn.addEventListener('click', () => {
                document.getElementById('menu-modal-title').textContent = 'ایجاد منوی جدید';
                menuModal.classList.remove('hidden');
            });

            closeMenuModalBtn.addEventListener('click', () => {
                menuModal.classList.add('hidden');
            });

            cancelMenuModalBtn.addEventListener('click', () => {
                menuModal.classList.add('hidden');
            });



            menuForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('menu-name');
                const image = document.getElementById('menu-image');


                const formData = new FormData();
                formData.append("name", name.value);
                formData.append("image", image.files[0]);

                console.log(formData);


                try {
                    const response = await fetch("http://135.125.238.202:7050/menu/", {
                        method: "POST",
                        headers: {
                            'Authorization': `Bearer ${token}`
                        },
                        body: formData
                    })

                    const data = await response.json();
                    if (response.status === 201) {
                        alert('منو با موفقیت ذخیره شد ');
                        menuModal.classList.add('hidden');

                        loadMenus();
                    } else if (response.status === 400) {
                        alert('ارور : تعداد منوی شما نمیتواند بیشتر از 5 عدد باشد ');
                    } else {
                        alert(' خطا در ارتباط ');
                    }


                } catch (error) {
                    console.error(" ارور شما : ", error);
                }


            });
        });



        const token = sessionStorage.getItem('accessToken');
        if (!token) {
            window.location.href = "login.html";
        }
    </script>
</body>

</html>